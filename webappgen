#!/bin/bash

if [[ $# == 1 ]]; then
  prodDir=$1
  
  if [ -d "$prodDir" ]; then
    echo "Directory already exists!"
    exit
  fi
  
  randName=$RANDOM

  echo "Getting the zip file..."
  wget https://github.com/tommica/html5stripped/archive/master.zip -O "$randName.zip" -q

  echo "Generating folders..."
  unzip -qq "$randName.zip"
  rm "$randName.zip"
  mv html5stripped-master $prodDir
  cd $prodDir

  if hash sass 2>/dev/null; then
    cd css/sass
    if hash bourbon 2>/dev/null; then
      echo "Adding bourbon..."
      bourbon install
      printf "@import 'bourbon/bourbon';\n" >> "ximports.scss"

      if hash neat 2>/dev/null; then
        echo "Adding neat..."
        neat install
        printf "@import 'neat/neat';\n" >> "ximports.scss"
      else
        echo "Neat not enabled..."
      fi
    else
      echo "Bourbon not enabled..."
      echo "Neat not enabled..."
    fi
    cd ..

    ./watch 1
    echo "Compiling SASS..."
  else
    echo "SASS does not exist..."
    echo "Bourbon not enabled..."
    echo "Neat not enabled..."
  fi

  cd ..
  echo "Finished!"
fi
